<h1>Сопровождение трансформации</h1>
<div class="formContainer">
      <form class="example-form">
        <h3>Введите идентификатор клиента</h3>
        <mat-form-field class="full-width">
          <input (input)="clientExists($event.target.value)" matInput placeholder="Идентификатор клиента" [formControl]="passport" required>
          <mat-error *ngFor="let validation of validation_messages.passport">
            <mat-error class="error-message" *ngIf="formControlPassport.hasError(validation.type) && (formControlPassport.dirty || formControlPassport.touched)">{{validation.message}}</mat-error>
          </mat-error>          
          <!-- <mat-hint *ngIf="currentClient!==undefined&&!isClientError">
            {{"Клиент: "+getFIO(currentClient.person)}}
          </mat-hint> -->
          <mat-hint style="color: red;" *ngIf="isClientError">
            {{clientErrorMsg}}
          </mat-hint>
        </mat-form-field>
        
        <mat-accordion *ngIf="currentClient!==undefined" class="headers-align">          
          <mat-expansion-panel (opened)="panelOpenState = true"
                               (closed)="panelOpenState = false">
            <mat-expansion-panel-header>
              <mat-panel-title>
                Данные клиента
              </mat-panel-title>              
              <mat-panel-description>
                {{panelOpenState ? "" : "Ф.И.О.: "+getFIO(currentClient.person)}}
                <mat-icon *ngIf="!panelOpenState">account_circle</mat-icon>
              </mat-panel-description>
            </mat-expansion-panel-header>            
            <mat-divider style="margin-top: -13px;"></mat-divider>
            <div style="padding-top:6px">
              <table class='table table-striped' aria-labelledby="tableLabel">                        
                <tbody>
                  <tr>
                    <td> Ф.И.О </td>
                    <td>{{currentClient.person.name+" "+currentClient.person.surname+" "+ currentClient.person.patronymic}} </td>                      
                  </tr>
                  <tr>
                    <td> Примечания </td>
                    <td>{{currentClient.comment}} </td>                      
                  </tr>
                  <tr>
                    <td> Дата рождения </td>
                    <td>{{currentClient.person.dateOfBirth | date:'shortDate'}} </td>                      
                  </tr>
                  <tr>
                    <td> Email </td>
                    <td>{{currentClient.email}} </td>                      
                  </tr>
                </tbody>
              </table>
            </div>
          </mat-expansion-panel>
        </mat-accordion>

        <h3 style="padding-top:6px">Выберете заявку</h3>        
        
        <div class="RequestButtons">
          <button (click)="generateScneario()" mat-raised-button color="primary" [disabled]="!passport.value||isClientError||selectedOrder===undefined" >Сгенерировать сценарий</button>              
        </div>        

        <div *ngIf="!currentOrders" >
          Укажите действительного клиента
        </div>

        <table class='table table-striped' aria-labelledby="tableLabel" *ngIf="currentOrders">
          <thead>
            <tr>
              <th>№</th>
              <th>специализация</th>
              <th>Комментарий</th>
              <th>Модификации</th>      
            </tr>
          </thead>
          <tbody>
            <tr (click)="selectRow(order)" class="tableRow" *ngFor="let order of currentOrders; let i = index" [attr.data-index]="i" [ngStyle]="order==selectedOrder && {'background-color':'beige'}">
              <td> {{i}} </td>
              <td>{{ order.specialization.name }}</td>              
              <td>{{ order.comment }}</td>
              <td>
                <li *ngFor="let mod of order.modifications">
                  {{mod.name}}
                </li>
              </td>
            </tr>
          </tbody>
        </table>
      </form>      
    </div>


    